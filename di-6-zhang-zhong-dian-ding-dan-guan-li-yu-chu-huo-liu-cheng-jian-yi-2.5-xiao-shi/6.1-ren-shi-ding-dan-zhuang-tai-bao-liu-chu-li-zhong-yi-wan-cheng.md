---
description: 在「WooCommerce」>「訂單」列表中，每筆訂單都有一個「狀態」。
---

# 6.1 認識訂單狀態 (保留/處理中/已完成)

**「狀態」是整個電商自動化的「語言」**。您必須精確理解每個狀態的意義，因為系統會根據「狀態」的改變，去自動觸發「金流」、「物流」和「發票」的下一步動作。

\[示意圖：WooCommerce 訂單列表，並框選「狀態」欄位]

#### 電商訂單的「生命週期」

這是一筆訂單從誕生到結束的完整流程：

**1. 保留 (Pending payment)**

* **定義：** 顧客已送出訂單，但系統「**正在等待付款**」。
* **發生情境：**
  1. 顧客選擇「**網路 ATM 轉帳**」，但尚未轉帳。
  2. 顧客選擇「信用卡」或「LINE Pay」，跳轉到付款頁面，但**尚未完成付款**（例如：關掉視窗、付款失敗）。
* **系統動作：**
  * WooCommerce 會「**保留**」這個商品的庫存（時間在 `c1-m3.5` 設定，例如 60 分鐘）。
  * 如果 60 分鐘內未付款，訂單會自動轉為「**已取消**」，庫存會**自動釋回**。
* **您的動作：** **不需出貨**。等待顧客付款。

**2. 處理中 (Processing)**

* **定義：** **付款已成功！** 這是您（經營者）**最重要**的狀態。
* **發生情境：**
  1. 顧客使用「**信用卡**」刷卡成功。
  2. 顧客使用「**LINE Pay**」付款成功。
  3. 顧客完成「**ATM 轉帳**」，金流商（綠界）自動對帳完成，並通知系統。
* **系統動作：**
  * 「**新訂單**」Email (或 LINE Notify) 通知管理者（您）。
  * 「**感謝訂購**」Email 通知顧客。
  * 庫存**正式扣除**。
* **您的動作：** **立刻開始打包商品、準備出貨！** (這就是 `6.2` 的 SOP)

**3. 已完成 (Completed)**

* **定義：** 整個交易「**已結束**」。代表顧客「**已付款**」並且「**已收到貨**」。
* **發生情境：**
  1. (手動) 您在「處理中」狀態寄出宅配後，手動將訂單改為「已完成」。
  2. **(自動)** 顧客選擇「超商取貨」(RY Tools)，並在 7-11 / 全家**完成取貨**。物流系統會自動回傳訊號，將訂單改為「已完成」。
* **系統動作：** (極為重要)
  * 觸發「**綠界 ECPay 電子發票**」外掛，**自動開立發票** (如 `c1-m5.5` 所設)。
  * 觸發「**YITH 紅利點數**」外掛，**自動發放**這筆訂單的點數給顧客 (如 `c1-m8.1` 所設)。
* **您的動作：** 不需動作。系統會自動收尾。

#### 其他輔助狀態

**4. 已取消 (Cancelled)**

* **定義：** 訂單已被取消，**庫存已釋回**。
* **發生情境：**
  1. (自動) 顧客（ATM 轉帳）超過 60 分鐘未付款。
  2. (手動) 顧客聯絡您，表示想取消訂單（在您出貨前）。

**5. 已退款 (Refunded)**

* **定義：** 您**已經**將款項（全部或部分）退還給顧客。
* **發生情境：**
  * (手動) 顧客收到商品後申請退貨，您在 WooCommerce 後台執行「退款」動作（詳見 `6.3`）。

**6. 失敗 (Failed)**

* **定義：** 付款**明確失敗**。
* **發生情境：**
  * 顧客刷卡時，銀行回傳「**授權失敗**」(例如：額度不足、盜刷卡號)。
* **系統動作：** 庫存會自動釋回。
